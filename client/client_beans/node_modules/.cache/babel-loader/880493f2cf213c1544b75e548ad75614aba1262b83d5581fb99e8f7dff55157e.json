{"ast":null,"code":"import { db } from './firebase';\nimport { collection, getDocs, addDoc, updateDoc, deleteDoc, doc, query, where, orderBy, limit } from 'firebase/firestore';\nconst BEANS_COLLECTION = 'beans';\n\n// Get all beans\nexport const getAllBeans = async () => {\n  try {\n    const querySnapshot = await getDocs(collection(db, BEANS_COLLECTION));\n    const beans = [];\n    querySnapshot.forEach(doc => {\n      beans.push({\n        id: doc.id,\n        ...doc.data()\n      });\n    });\n    return beans;\n  } catch (error) {\n    console.error('Error getting beans:', error);\n    throw error;\n  }\n};\n\n// Search beans by name, country, or roast type\nexport const searchBeans = async searchTerm => {\n  try {\n    const beansRef = collection(db, BEANS_COLLECTION);\n    const q = query(beansRef, where('name', '>=', searchTerm), where('name', '<=', searchTerm + '\\uf8ff'));\n    const querySnapshot = await getDocs(q);\n    const results = [];\n    querySnapshot.forEach(doc => {\n      results.push({\n        id: doc.id,\n        ...doc.data()\n      });\n    });\n\n    // Also search in country and colour fields\n    const countryQuery = query(beansRef, where('Country', '>=', searchTerm), where('Country', '<=', searchTerm + '\\uf8ff'));\n    const roastQuery = query(beansRef, where('colour', '>=', searchTerm), where('colour', '<=', searchTerm + '\\uf8ff'));\n    const [countrySnapshot, roastSnapshot] = await Promise.all([getDocs(countryQuery), getDocs(roastQuery)]);\n    countrySnapshot.forEach(doc => {\n      const data = {\n        id: doc.id,\n        ...doc.data()\n      };\n      if (!results.find(b => b.id === data.id)) {\n        results.push(data);\n      }\n    });\n    roastSnapshot.forEach(doc => {\n      const data = {\n        id: doc.id,\n        ...doc.data()\n      };\n      if (!results.find(b => b.id === data.id)) {\n        results.push(data);\n      }\n    });\n    return results;\n  } catch (error) {\n    console.error('Error searching beans:', error);\n    throw error;\n  }\n};\n\n// Get beans of the day (isBOTD = true)\nexport const getBeansOfTheDay = async () => {\n  try {\n    const q = query(collection(db, BEANS_COLLECTION), where('isBOTD', '==', true));\n    const querySnapshot = await getDocs(q);\n    const beans = [];\n    querySnapshot.forEach(doc => {\n      beans.push({\n        id: doc.id,\n        ...doc.data()\n      });\n    });\n    return beans;\n  } catch (error) {\n    console.error('Error getting beans of the day:', error);\n    throw error;\n  }\n};\n\n// Add a new bean (for admin functionality)\nexport const addBean = async beanData => {\n  try {\n    const docRef = await addDoc(collection(db, BEANS_COLLECTION), beanData);\n    return {\n      id: docRef.id,\n      ...beanData\n    };\n  } catch (error) {\n    console.error('Error adding bean:', error);\n    throw error;\n  }\n};\n\n// Update a bean\nexport const updateBean = async (id, beanData) => {\n  try {\n    const beanRef = doc(db, BEANS_COLLECTION, id);\n    await updateDoc(beanRef, beanData);\n    return {\n      id,\n      ...beanData\n    };\n  } catch (error) {\n    console.error('Error updating bean:', error);\n    throw error;\n  }\n};\n\n// Delete a bean\nexport const deleteBean = async id => {\n  try {\n    await deleteDoc(doc(db, BEANS_COLLECTION, id));\n    return id;\n  } catch (error) {\n    console.error('Error deleting bean:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["db","collection","getDocs","addDoc","updateDoc","deleteDoc","doc","query","where","orderBy","limit","BEANS_COLLECTION","getAllBeans","querySnapshot","beans","forEach","push","id","data","error","console","searchBeans","searchTerm","beansRef","q","results","countryQuery","roastQuery","countrySnapshot","roastSnapshot","Promise","all","find","b","getBeansOfTheDay","addBean","beanData","docRef","updateBean","beanRef","deleteBean"],"sources":["M:/flodev/test/client/client_beans/src/services/beanService.js"],"sourcesContent":["import { db } from './firebase';\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  doc,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  limit\r\n} from 'firebase/firestore';\r\n\r\nconst BEANS_COLLECTION = 'beans';\r\n\r\n// Get all beans\r\nexport const getAllBeans = async () => {\r\n  try {\r\n    const querySnapshot = await getDocs(collection(db, BEANS_COLLECTION));\r\n    const beans = [];\r\n    querySnapshot.forEach((doc) => {\r\n      beans.push({ id: doc.id, ...doc.data() });\r\n    });\r\n    return beans;\r\n  } catch (error) {\r\n    console.error('Error getting beans:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Search beans by name, country, or roast type\r\nexport const searchBeans = async (searchTerm) => {\r\n  try {\r\n    const beansRef = collection(db, BEANS_COLLECTION);\r\n    const q = query(\r\n      beansRef,\r\n      where('name', '>=', searchTerm),\r\n      where('name', '<=', searchTerm + '\\uf8ff')\r\n    );\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    const results = [];\r\n    querySnapshot.forEach((doc) => {\r\n      results.push({ id: doc.id, ...doc.data() });\r\n    });\r\n\r\n    // Also search in country and colour fields\r\n    const countryQuery = query(\r\n      beansRef,\r\n      where('Country', '>=', searchTerm),\r\n      where('Country', '<=', searchTerm + '\\uf8ff')\r\n    );\r\n\r\n    const roastQuery = query(\r\n      beansRef,\r\n      where('colour', '>=', searchTerm),\r\n      where('colour', '<=', searchTerm + '\\uf8ff')\r\n    );\r\n\r\n    const [countrySnapshot, roastSnapshot] = await Promise.all([\r\n      getDocs(countryQuery),\r\n      getDocs(roastQuery)\r\n    ]);\r\n\r\n    countrySnapshot.forEach((doc) => {\r\n      const data = { id: doc.id, ...doc.data() };\r\n      if (!results.find(b => b.id === data.id)) {\r\n        results.push(data);\r\n      }\r\n    });\r\n\r\n    roastSnapshot.forEach((doc) => {\r\n      const data = { id: doc.id, ...doc.data() };\r\n      if (!results.find(b => b.id === data.id)) {\r\n        results.push(data);\r\n      }\r\n    });\r\n\r\n    return results;\r\n  } catch (error) {\r\n    console.error('Error searching beans:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Get beans of the day (isBOTD = true)\r\nexport const getBeansOfTheDay = async () => {\r\n  try {\r\n    const q = query(\r\n      collection(db, BEANS_COLLECTION),\r\n      where('isBOTD', '==', true)\r\n    );\r\n    const querySnapshot = await getDocs(q);\r\n    const beans = [];\r\n    querySnapshot.forEach((doc) => {\r\n      beans.push({ id: doc.id, ...doc.data() });\r\n    });\r\n    return beans;\r\n  } catch (error) {\r\n    console.error('Error getting beans of the day:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Add a new bean (for admin functionality)\r\nexport const addBean = async (beanData) => {\r\n  try {\r\n    const docRef = await addDoc(collection(db, BEANS_COLLECTION), beanData);\r\n    return { id: docRef.id, ...beanData };\r\n  } catch (error) {\r\n    console.error('Error adding bean:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Update a bean\r\nexport const updateBean = async (id, beanData) => {\r\n  try {\r\n    const beanRef = doc(db, BEANS_COLLECTION, id);\r\n    await updateDoc(beanRef, beanData);\r\n    return { id, ...beanData };\r\n  } catch (error) {\r\n    console.error('Error updating bean:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Delete a bean\r\nexport const deleteBean = async (id) => {\r\n  try {\r\n    await deleteDoc(doc(db, BEANS_COLLECTION, id));\r\n    return id;\r\n  } catch (error) {\r\n    console.error('Error deleting bean:', error);\r\n    throw error;\r\n  }\r\n};"],"mappings":"AAAA,SAASA,EAAE,QAAQ,YAAY;AAC/B,SACEC,UAAU,EACVC,OAAO,EACPC,MAAM,EACNC,SAAS,EACTC,SAAS,EACTC,GAAG,EACHC,KAAK,EACLC,KAAK,EACLC,OAAO,EACPC,KAAK,QACA,oBAAoB;AAE3B,MAAMC,gBAAgB,GAAG,OAAO;;AAEhC;AACA,OAAO,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;EACrC,IAAI;IACF,MAAMC,aAAa,GAAG,MAAMX,OAAO,CAACD,UAAU,CAACD,EAAE,EAAEW,gBAAgB,CAAC,CAAC;IACrE,MAAMG,KAAK,GAAG,EAAE;IAChBD,aAAa,CAACE,OAAO,CAAET,GAAG,IAAK;MAC7BQ,KAAK,CAACE,IAAI,CAAC;QAAEC,EAAE,EAAEX,GAAG,CAACW,EAAE;QAAE,GAAGX,GAAG,CAACY,IAAI,CAAC;MAAE,CAAC,CAAC;IAC3C,CAAC,CAAC;IACF,OAAOJ,KAAK;EACd,CAAC,CAAC,OAAOK,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5C,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;AACA,OAAO,MAAME,WAAW,GAAG,MAAOC,UAAU,IAAK;EAC/C,IAAI;IACF,MAAMC,QAAQ,GAAGtB,UAAU,CAACD,EAAE,EAAEW,gBAAgB,CAAC;IACjD,MAAMa,CAAC,GAAGjB,KAAK,CACbgB,QAAQ,EACRf,KAAK,CAAC,MAAM,EAAE,IAAI,EAAEc,UAAU,CAAC,EAC/Bd,KAAK,CAAC,MAAM,EAAE,IAAI,EAAEc,UAAU,GAAG,QAAQ,CAC3C,CAAC;IAED,MAAMT,aAAa,GAAG,MAAMX,OAAO,CAACsB,CAAC,CAAC;IACtC,MAAMC,OAAO,GAAG,EAAE;IAClBZ,aAAa,CAACE,OAAO,CAAET,GAAG,IAAK;MAC7BmB,OAAO,CAACT,IAAI,CAAC;QAAEC,EAAE,EAAEX,GAAG,CAACW,EAAE;QAAE,GAAGX,GAAG,CAACY,IAAI,CAAC;MAAE,CAAC,CAAC;IAC7C,CAAC,CAAC;;IAEF;IACA,MAAMQ,YAAY,GAAGnB,KAAK,CACxBgB,QAAQ,EACRf,KAAK,CAAC,SAAS,EAAE,IAAI,EAAEc,UAAU,CAAC,EAClCd,KAAK,CAAC,SAAS,EAAE,IAAI,EAAEc,UAAU,GAAG,QAAQ,CAC9C,CAAC;IAED,MAAMK,UAAU,GAAGpB,KAAK,CACtBgB,QAAQ,EACRf,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAEc,UAAU,CAAC,EACjCd,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAEc,UAAU,GAAG,QAAQ,CAC7C,CAAC;IAED,MAAM,CAACM,eAAe,EAAEC,aAAa,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CACzD7B,OAAO,CAACwB,YAAY,CAAC,EACrBxB,OAAO,CAACyB,UAAU,CAAC,CACpB,CAAC;IAEFC,eAAe,CAACb,OAAO,CAAET,GAAG,IAAK;MAC/B,MAAMY,IAAI,GAAG;QAAED,EAAE,EAAEX,GAAG,CAACW,EAAE;QAAE,GAAGX,GAAG,CAACY,IAAI,CAAC;MAAE,CAAC;MAC1C,IAAI,CAACO,OAAO,CAACO,IAAI,CAACC,CAAC,IAAIA,CAAC,CAAChB,EAAE,KAAKC,IAAI,CAACD,EAAE,CAAC,EAAE;QACxCQ,OAAO,CAACT,IAAI,CAACE,IAAI,CAAC;MACpB;IACF,CAAC,CAAC;IAEFW,aAAa,CAACd,OAAO,CAAET,GAAG,IAAK;MAC7B,MAAMY,IAAI,GAAG;QAAED,EAAE,EAAEX,GAAG,CAACW,EAAE;QAAE,GAAGX,GAAG,CAACY,IAAI,CAAC;MAAE,CAAC;MAC1C,IAAI,CAACO,OAAO,CAACO,IAAI,CAACC,CAAC,IAAIA,CAAC,CAAChB,EAAE,KAAKC,IAAI,CAACD,EAAE,CAAC,EAAE;QACxCQ,OAAO,CAACT,IAAI,CAACE,IAAI,CAAC;MACpB;IACF,CAAC,CAAC;IAEF,OAAOO,OAAO;EAChB,CAAC,CAAC,OAAON,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;IAC9C,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;AACA,OAAO,MAAMe,gBAAgB,GAAG,MAAAA,CAAA,KAAY;EAC1C,IAAI;IACF,MAAMV,CAAC,GAAGjB,KAAK,CACbN,UAAU,CAACD,EAAE,EAAEW,gBAAgB,CAAC,EAChCH,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,CAC5B,CAAC;IACD,MAAMK,aAAa,GAAG,MAAMX,OAAO,CAACsB,CAAC,CAAC;IACtC,MAAMV,KAAK,GAAG,EAAE;IAChBD,aAAa,CAACE,OAAO,CAAET,GAAG,IAAK;MAC7BQ,KAAK,CAACE,IAAI,CAAC;QAAEC,EAAE,EAAEX,GAAG,CAACW,EAAE;QAAE,GAAGX,GAAG,CAACY,IAAI,CAAC;MAAE,CAAC,CAAC;IAC3C,CAAC,CAAC;IACF,OAAOJ,KAAK;EACd,CAAC,CAAC,OAAOK,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;IACvD,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;AACA,OAAO,MAAMgB,OAAO,GAAG,MAAOC,QAAQ,IAAK;EACzC,IAAI;IACF,MAAMC,MAAM,GAAG,MAAMlC,MAAM,CAACF,UAAU,CAACD,EAAE,EAAEW,gBAAgB,CAAC,EAAEyB,QAAQ,CAAC;IACvE,OAAO;MAAEnB,EAAE,EAAEoB,MAAM,CAACpB,EAAE;MAAE,GAAGmB;IAAS,CAAC;EACvC,CAAC,CAAC,OAAOjB,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;IAC1C,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;AACA,OAAO,MAAMmB,UAAU,GAAG,MAAAA,CAAOrB,EAAE,EAAEmB,QAAQ,KAAK;EAChD,IAAI;IACF,MAAMG,OAAO,GAAGjC,GAAG,CAACN,EAAE,EAAEW,gBAAgB,EAAEM,EAAE,CAAC;IAC7C,MAAMb,SAAS,CAACmC,OAAO,EAAEH,QAAQ,CAAC;IAClC,OAAO;MAAEnB,EAAE;MAAE,GAAGmB;IAAS,CAAC;EAC5B,CAAC,CAAC,OAAOjB,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5C,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;AACA,OAAO,MAAMqB,UAAU,GAAG,MAAOvB,EAAE,IAAK;EACtC,IAAI;IACF,MAAMZ,SAAS,CAACC,GAAG,CAACN,EAAE,EAAEW,gBAAgB,EAAEM,EAAE,CAAC,CAAC;IAC9C,OAAOA,EAAE;EACX,CAAC,CAAC,OAAOE,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5C,MAAMA,KAAK;EACb;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}